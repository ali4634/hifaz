 <!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตู ุญุงุถุฑ ู ุณุจู ุฑุฌุณูนุฑ</title>
  <link rel="icon" type="image/png" href="icons/icon-192x192.png">
<link rel="shortcut icon" href="icons/icon-192x192.png">


    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3498db"/>
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="manifest" href="manifest.json">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h1>๐ ููุตู ุญุงุถุฑ ู ุณุจู ุฑุฌุณูนุฑ (ูุญููุธ ูุฑฺู)</h1>
    
    <select class="section-selector" id="section-selector">
        <option value="section1">ุณฺฉุดู 1</option>
        <option value="section2">ุณฺฉุดู 2</option>
        <option value="section3">ุณฺฉุดู 3</option>
    </select>
    
    <div class="tabs">
        <div class="tab active" data-tab="attendance">ุญุงุถุฑ</div>
        <div class="tab" data-tab="stats">ุงุนุฏุงุฏ ู ุดูุงุฑ</div>
        <div class="tab" data-tab="full-record">ูฺฉูู ุฑฺฉุงุฑฺ</div>
        <div class="tab" data-tab="students">ุทูุจุงุก ููุฌูููน</div>
        <div class="tab" data-tab="backup">ุจฺฉ ุงูพ & ุจุญุงู</div>
    </div>
    
    <div class="tab-content active" id="attendance-tab">
        <div class="date-header">
            <div class="date-selector">
                <div class="date-input">
                    <input type="date" id="date-picker">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h2 id="current-date"></h2>
                <button class="small-btn add-btn" id="next-day-btn">ุงฺฏู ุฏู</button>
            </div>
        </div>
        
        <div style="overflow-x: auto;">
            <table id="attendance-table">
                <thead>
                    <tr class="table-header">
                        <th width="25%">ูุงู</th>
                        <th width="8%">ุญุงุถุฑ</th>
                        <th width="12%">ุณุจู</th>
                        <th width="12%">ุณุจู</th>
                        <th width="12%">ููุฒู</th>
                        <th width="8%">ุชุจุตุฑ</th>
                        <th width="23%">ุนูู</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ฺูนุง ุงฺบ ุฏุงุฎู ูฺฏุง -->
                </tbody>
            </table>
        </div>
        
        <div style="margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap;">
            <button class="small-btn add-btn" id="save-btn">๐พ ูุญููุธ ฺฉุฑฺบ</button>
            <button class="small-btn add-btn" id="export-btn">๐ค JSON ุงฺฉุณูพูุฑูน</button>
            <input type="file" id="import-btn" style="display: none;" accept=".json"/>
            <button class="small-btn add-btn" onclick="document.getElementById('import-btn').click()">๐ฅ JSON ุฏุฑุขูุฏ</button>
            <button class="small-btn add-btn" id="export-csv-btn">๐ CSV ุงฺฉุณูพูุฑูน</button>
            <input type="file" id="import-csv-btn" style="display: none;" accept=".csv"/>
            <button class="small-btn add-btn" onclick="document.getElementById('import-csv-btn').click()">๐ CSV ุฏุฑุขูุฏ</button>
        </div>
    </div>
    
    <div class="tab-content" id="stats-tab">
        <h2>ุขุฌ ฺฉุง ุฎูุงุต</h2>
        
        <div class="stats-container">
            <div class="stat-card">
                <h3>ฺฉู ุทูุจุงุก</h3>
                <div class="stat-value" id="total-students">0</div>
            </div>
            <div class="stat-card">
                <h3>ุญุงุถุฑู</h3>
                <div class="stat-value" id="present-count">0</div>
                <div class="student-name-small" id="present-names"></div>
            </div>
            <div class="stat-card">
                <h3>ุบุฑ ุญุงุถุฑู</h3>
                <div class="stat-value" id="absent-count">0</div>
                <div class="student-name-small" id="absent-names"></div>
            </div>
            <div class="stat-card">
                <h3>ุณุจู ุณูุงู ูุงู</h3>
                <div class="stat-value" id="lesson-count">0</div>
                <div class="student-name-small" id="lesson-names"></div>
            </div>
            <div class="stat-card">
                <h3>ุณุจู ุณูุงู ูุงู</h3>
                <div class="stat-value" id="homework-count">0</div>
                <div class="student-name-small" id="homework-names"></div>
            </div>
            <div class="stat-card">
                <h3>ููุฒู ูฺฉูู ฺฉุฑู ูุงู</h3>
                <div class="stat-value" id="milestone-count">0</div>
                <div class="student-name-small" id="milestone-names"></div>
            </div>
        </div>
        
        <h3>ุชูุตู ุฑูพูุฑูน</h3>
        <div style="overflow-x: auto;">
            <table class="report-table">
                <thead>
                    <tr class="table-header">
                        <th>ฺฉูนฺฏุฑ</th>
                        <th>ุชุนุฏุงุฏ</th>
                        <th>ูุตุฏ</th>
                        <th>ููุฏุงุฑ</th>
                    </tr>
                </thead>
                <tbody id="stats-details">
                    <!-- ุงุนุฏุงุฏ ู ุดูุงุฑ ุงฺบ ุฏุงุฎู ูฺบ ฺฏ -->
                </tbody>
            </table>
        </div>
    </div>
        <div class="tab-content" id="full-record-tab">
        <h2>ูฺฉูู ุฑฺฉุงุฑฺ</h2>
        
        <div class="record-filters">
            <div class="year-selector-container">
                <select id="year-selector" class="record-selector">
                    <option value="">-- ุณุงู ููุชุฎุจ ฺฉุฑฺบ --</option>
                    <!-- JavaScript ุณ ุฎูุฏุจุฎูุฏ ุจฺพุฑ ุฌุงุฆ ฺฏุง -->
                </select>
                <button class="add-year-btn" id="add-year-btn">+</button>
            </div>
            
            <select id="month-selector" class="record-selector">
                <option value="">-- ูู ููุชุฎุจ ฺฉุฑฺบ --</option>
                <!-- JavaScript ุณ ุฎูุฏุจุฎูุฏ ุจฺพุฑ ุฌุงุฆ ฺฏุง -->
            </select>
            
            <select id="student-selector" class="record-selector">
                <option value="">-- ุทุงูุจ ุนูู ููุชุฎุจ ฺฉุฑฺบ --</option>
                <!-- JavaScript ุณ ุฎูุฏุจุฎูุฏ ุจฺพุฑ ุฌุงุฆ ฺฏุง -->
            </select>
            
            <input type="date" id="record-date-picker" class="record-date-picker" placeholder="ุชุงุฑุฎ ููุชุฎุจ ฺฉุฑฺบ">
            
            <button class="small-btn add-btn" id="load-record">ููฺ ฺฉุฑฺบ</button>
        </div>
        
        <div id="full-record-result" style="display: none;">
            <div style="overflow-x: auto;">
                <table class="report-table">
                    <thead>
                        <tr class="table-header">
                            <th>ูุงู</th>
                            <th>ุชุงุฑุฎ</th>
                            <th>ุญุงุถุฑ</th>
                            <th>ุณุจู</th>
                            <th>ุณุจู</th>
                            <th>ููุฒู</th>
                            <th>ุชุจุตุฑ</th>
                            <th>ุณุจู ููุฏุงุฑ</th>
                            <th>ุณุจู ููุฏุงุฑ</th>
                            <th>ููุฒู ููุฏุงุฑ</th>
                        </tr>
                    </thead>
                    <tbody id="record-data">
                        <!-- ุฑฺฉุงุฑฺ ฺูนุง ุงฺบ ุฏุงุฎู ูฺฏุง -->
                    </tbody>
                </table>
            </div>
            
            <div class="record-summary">
                <h3>ุฎูุงุต</h3>
                <div id="summary-stats">
                    <!-- ุฎูุงุต ุงุนุฏุงุฏ ู ุดูุงุฑ ุงฺบ ุฏุงุฎู ูฺบ ฺฏ -->
                </div>
                
                <div class="share-buttons">
                    <button class="small-btn whatsapp-btn" id="share-whatsapp">
                        <i class="fab fa-whatsapp"></i> ูุงูนุณ ุงูพ ูพุฑ ุดุฆุฑ ฺฉุฑฺบ
                    </button>
                    <button class="small-btn pdf-btn" id="export-pdf">
                        <i class="fas fa-file-pdf"></i> PDF ุจูุงุฆฺบ
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ุทูุจุงุก ููุฌูููน ูนุจ -->
    <div class="tab-content" id="students-tab">
        <h2>ุทูุจุงุก ฺฉ ุงูุชุธุงู</h2>
        
        <div class="student-management">
            <h3>ุทูุจุงุก ฺฉ ูุฑุณุช</h3>
            <div class="input-group">
                <input type="text" id="new-student-name" placeholder="ูุง ุทุงูุจ ุนูู ฺฉุง ูุงู">
                <input type="text" id="new-student-phone" placeholder="ููู ููุจุฑ">
                <button class="small-btn add-btn" id="add-student-btn">ุดุงูู ฺฉุฑฺบ</button>
            </div>
            
            <div class="student-list" id="student-list">
                <!-- ุทูุจุงุก ฺฉ ูุฑุณุช ุงฺบ ุธุงุฑ ูฺฏ -->
            </div>
            
            <div style="margin-top: 10px;">
                <button class="small-btn delete-btn" id="clear-students-btn">ุชูุงู ุทูุจุงุก ุญุฐู ฺฉุฑฺบ</button>
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <h3>ุฏุฑุขูุฏ/ุจุฑุขูุฏ</h3>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button class="small-btn add-btn" id="export-students-btn">ุทูุจุงุก ฺฉ ูุฑุณุช ุจุฑุขูุฏ ฺฉุฑฺบ</button>
                <input type="file" id="import-students-btn" style="display: none;" accept=".json"/>
                <button class="small-btn add-btn" onclick="document.getElementById('import-students-btn').click()">ุทูุจุงุก ฺฉ ูุฑุณุช ุฏุฑุขูุฏ ฺฉุฑฺบ</button>
            </div>
        </div>
    </div>
    
    <!-- ุจฺฉ ุงูพ ุงูุฑ ุจุญุงู ูนุจ -->
    <div class="tab-content" id="backup-tab">
        <h2>ฺูนุง ุจฺฉ ุงูพ ุงูุฑ ุจุญุงู</h2>
        
        <div class="backup-section">
            <h3>ุฎูุฏฺฉุงุฑ ุจฺฉ ุงูพ</h3>
            <p> ุงูพ ุฎูุฏ ุจุฎูุฏ ุฑ ุชุจุฏู ูพุฑ ฺูนุง ฺฉุง ุจฺฉ ุงูพ ูุญููุธ ฺฉุฑุช  ุขุฎุฑ 5 ุจฺฉ ุงูพุณ ุฏุณุชุงุจ ฺบ:</p>
            <div id="auto-backup-list" style="margin: 10px 0;"></div>
            
            <h3>ุฏุณุช ุจฺฉ ุงูพ</h3>
            <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px;">
                <button class="small-btn add-btn" id="create-backup-btn">ุจฺฉ ุงูพ ุจูุงุฆฺบ</button>
                <button class="small-btn view-btn" id="view-all-backups-btn">ุชูุงู ุจฺฉ ุงูพุณ ุฏฺฉฺพฺบ</button>
            </div>
            
            <h3>ุจุญุงู ฺฉ ุงุฎุชุงุฑุงุช</h3>
            <div style="margin-top: 10px;">
                <button class="small-btn add-btn" id="restore-latest-btn">ุชุงุฒ ุชุฑู ุจฺฉ ุงูพ ุณ ุจุญุงู</button>
                <button class="small-btn delete-btn" id="clear-all-data-btn" style="margin-top: 8px;">ุชูุงู ฺูนุง ุตุงู ฺฉุฑฺบ</button>
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <h3>ฺูนุง ฺฉ ุณุงููุช ฺฉ ุชุตุฏู</h3>
            <button class="small-btn view-btn" id="verify-data-btn">ฺูนุง ฺฉ ุฌุงูฺ ฺฉุฑฺบ</button>
            <div id="data-verification-result" style="margin-top: 10px;"></div>
        </div>
    </div>
</div>
    <!-- ุชุจุตุฑ ููฺู -->
<div id="comment-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="comment-title">ุทุงูุจ ุนูู ฺฉุง ุชุจุตุฑ</h2>
        <textarea id="comment-text" rows="4" style="width: 100%; padding: 8px; border-radius: var(--border-radius); border: 1px solid #ddd;"></textarea>
        <button class="small-btn add-btn" id="save-comment" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ููู ููุจุฑ ููฺู -->
<div id="phone-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="phone-title">ุณุฑูพุฑุณุช ฺฉุง ููู ููุจุฑ</h2>
        <input type="text" id="phone-number" placeholder="">
        <button class="small-btn add-btn" id="save-phone" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ูุงู ุงฺูน ููฺู -->
<div id="name-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="name-title">ุทุงูุจ ุนูู ฺฉุง ูุงู</h2>
        <input type="text" id="student-name" placeholder="">
        <button class="small-btn add-btn" id="save-name" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ููุฏุงุฑ ููฺู -->
<div id="quantity-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="quantity-title">ููุฏุงุฑ ฺฉ ุชูุตูุงุช</h2>
        <div class="input-group">
            <label for="lesson-quantity">ุณุจู ููุฏุงุฑ</label>
            <input type="text" id="lesson-quantity" placeholder="">
        </div>
        <div class="input-group">
            <label for="homework-quantity">ุณุจู ููุฏุงุฑ</label>
            <input type="text" id="homework-quantity" placeholder="">
        </div>
        <div class="input-group">
            <label for="milestone-quantity">ููุฒู ููุฏุงุฑ</label>
            <input type="text" id="milestone-quantity" placeholder="">
        </div>
        <button class="small-btn add-btn" id="save-quantity" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ุณุจู ููุฏุงุฑ ููฺู -->
<div id="lesson-quantity-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="lesson-quantity-title">ุณุจู ููุฏุงุฑ</h2>
        <input type="text" id="lesson-quantity-input" placeholder="">
        <button class="small-btn add-btn" id="save-lesson-quantity" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ุณุจู ููุฏุงุฑ ููฺู -->
<div id="homework-quantity-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="homework-quantity-title">ุณุจู ููุฏุงุฑ</h2>
        <input type="text" id="homework-quantity-input" placeholder="">
        <button class="small-btn add-btn" id="save-homework-quantity" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ููุฒู ููุฏุงุฑ ููฺู -->
<div id="milestone-quantity-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="milestone-quantity-title">ููุฒู ููุฏุงุฑ</h2>
        <input type="text" id="milestone-quantity-input" placeholder="">
        <button class="small-btn add-btn" id="save-milestone-quantity" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ุฑูพูุฑูน ููฺู -->
<div id="report-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2 id="report-title">ุทุงูุจ ุนูู ฺฉ ุฑูพูุฑูน</h2>
        <div id="report-content">
            <table class="report-table">
                <!-- ุฑูพูุฑูน ฺูนุง ุงฺบ ุฏุงุฎู ูฺฏุง -->
            </table>
        </div>
    </div>
</div>

<!-- ูุง ุณุงู ุดุงูู ฺฉุฑู ฺฉุง ููฺู -->
<div id="year-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2>ูุง ุณุงู ุดุงูู ฺฉุฑฺบ</h2>
        <input type="number" id="new-year" placeholder="" min="2023" max="2100" style="width: 100%; padding: 8px; border-radius: var(--border-radius); border: 1px solid #ddd; margin: 10px 0;">
        <button class="small-btn add-btn" id="save-year" style="margin-top: 10px;">ูุญููุธ ฺฉุฑฺบ</button>
    </div>
</div>

<!-- ุจฺฉ ุงูพ ููฺู -->
<div id="backup-modal" class="modal">
    <div class="modal-content">
        <span class="close">ร</span>
        <h2>ุชูุงู ุฏุณุชุงุจ ุจฺฉ ุงูพุณ</h2>
        <div id="all-backups-list" style="max-height: 400px; overflow-y: auto; margin: 15px 0;"></div>
        <button class="small-btn delete-btn" id="delete-old-backups-btn" style="margin-top: 10px;">ูพุฑุงู ุจฺฉ ุงูพุณ ุญุฐู ฺฉุฑฺบ (5 ุณ ุฒุงุฏ)</button>
    </div>
</div>

<button id="refresh-btn" title="ุฑูุฑุด">โณ</button>
    
<!-- External JavaScript -->
<script src="script.js"></script>

<!-- Service Worker Registration -->
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(registration) {
                console.log('Service Worker registered with scope: ', registration.scope);
            }, function(err) {
                console.log('Service Worker registration failed: ', err);
            });
        });
    }
</script>
</body>
</html>
